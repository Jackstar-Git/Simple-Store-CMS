<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{{ product.name }} bei Birdie Club GmbH: Jetzt ansehen!">
    <meta name="keywords" content="Golf, Birdie Club GmbH, {{ product.name }}, {{ product.categories | join(', ') }}">
    <meta name="author" content="Birdie Club GmbH">

    <meta property="product:price:amount" content="{{ '%.2f' | format(product.new_price or product.price) }}">
    <meta property="product:price:currency" content="EUR">
    <meta property="product:availability" content="{{ product.availability }}">

    <title>{{ product.name }} - Birdie Club GmbH</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/product.css') }}">
    <link rel="shortcut icon" href="{{ url_for('internal.uploads', filename='Logo.png') }}" type="image">
</head>
<body>
    {% include "snippets/navbar.jinja-html" %}
    <div class="product-container">
        <div class="product-images">
            <div class="image-gallery">                
                <img src="{{ url_for('internal.uploads', filename=product.thumbnail) }}" alt="{{ product.name }} Thumbnail" class="gallery-image">
                {% for image in product.images %}
                    <img src="{{ url_for('internal.uploads', filename=image) }}" alt="{{ product.name }} Image {{ loop.index }}" class="gallery-image">
                {% endfor %}
            </div>
            <img src="{{ url_for('internal.uploads', filename=product.thumbnail) }}" alt="{{ product.name }}" class="main-image" id="main-image">
        </div>

        <div class="product-details">
            <h1>{{ product.name }}</h1>
            
            <div class="price-box">
                <span class="old-price">€{{ product.price|custom_format }}</span>
                {% if product.new_price %}
                <span class="new-price">€{{ product.new_price|custom_format }}</span>
                {% endif %}
            </div>

            <p class="availability">Verfügbarkeit: {{ product.availability }}</p>
            <p class="description">{{ product.description }}</p>

            <div class="product-info">
                <span class="category-label">Kategorien:</span>
                <div class="categories">
                    {% for category in product.categories %}
                        <a href="/produkte?category={{ category }}">{{ category }}</a>
                    {% endfor %}
                </div>
                <span class="tax-note">inkl. {{ product.tax }}% USt.</span>
            </div>

            <div class="purchase-box">
                <form id="addToCartForm" onsubmit="addToCart(event)">
                    <label for="quantity">Menge:</label>
                    <input type="hidden" name="csrf_token" value="{{ generate_token() }}">
                    <input type="hidden" name="product_id" value="{{ product.id }}">
                    <input type="number" id="quantity" name="quantity" value="1" min="1" max="{{ product.amount }}">
                    <button type="submit" class="add-to-cart-btn">In den Warenkorb</button>
                </form>
            </div>
        </div>
    </div>

    {% include "snippets/footer.jinja-html" %}
    <script src="{{ url_for('static', filename='js/product.js') }}"></script>
</body>
</html>

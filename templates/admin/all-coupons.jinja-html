<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="{{ url_for('internal.uploads', filename='Logo.png') }}" type="image">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin/all-coupons.css') }}">
    <title>Admin Panel - Coupons</title>
</head>
<body>
    <div class="main-container">
        {% include "admin/sidebar.jinja-html" %}

        <div class="main-content">
            <h2>Übersicht Coupons</h2>

            <div class="coupons-list">
                {% for coupon in coupons %}
                    <div class="coupon-item">
                        <div class="id-column">{{ loop.index }}</div> 
                        <div class="coupon-info">
                            <h3>{{ coupon.id }}</h3>
                        </div>

                        <div class="coupon-details">
                            <p>
                                <span class="info-label">Typ:</span> {{ coupon.type == 'percentage' and coupon.value ~ '%' or '€ ' ~ coupon.value }}
                            </p>
                            <p>
                                <span class="info-label">Verbleibende Nutzungen:</span> 
                                {% if not coupon.uses_remaining %} 
                                    Unbegrenzt 
                                {% else %} 
                                    {{ coupon.uses_remaining }} 
                                {% endif %}
                            </p>
                            <p>
                                <span class="info-label">Gültig bis:</span> 
                                {% if coupon.valid_till %} 
                                    {{ coupon.valid_till }} 
                                {% else %} 
                                    Unbegrenzt 
                                {% endif %}
                            </p>
                        </div>


                        <div class="coupon-actions">
                            <!-- Edit Button -->
                            <a href="/admin/coupon/{{coupon.id}}" class="btn edit-btn"><i class="fas fa-edit"></i></a>

                            <!-- Delete Button -->
                            <a href="/api/delete-coupon?id={{coupon.id}}" class="btn delete-btn" onclick="return confirm('Bist du sicher, dass du diesen Coupon löschen möchtest?')"><i class="fas fa-trash-alt"></i></a>
                        </div>
                    </div>
                {% else %}
                    <p>Keine Coupons gefunden.</p>
                {% endfor %}
            </div>

        </div>
    </div>
</body>
</html>
